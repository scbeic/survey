<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LINE LIFF Flex Message</title>
<style>

        body {

            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

            margin: 0;

            padding: 20px;

            background: linear-gradient(135deg, #00B900, #00D900);

            min-height: 100vh;

            display: flex;

            flex-direction: column;

            align-items: center;

            justify-content: center;

        }

        .container {

            background: white;

            border-radius: 16px;

            padding: 30px;

            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);

            max-width: 400px;

            width: 100%;

            text-align: center;

        }

        .status {

            margin: 20px 0;

            padding: 15px;

            border-radius: 8px;

            font-weight: bold;

        }

        .loading {

            background: #f0f8ff;

            color: #1976d2;

            border: 2px solid #e3f2fd;

        }

        .success {

            background: #e8f5e8;

            color: #2e7d32;

            border: 2px solid #c8e6c9;

        }

        .error {

            background: #ffebee;

            color: #c62828;

            border: 2px solid #ffcdd2;

        }

        .spinner {

            border: 3px solid #f3f3f3;

            border-top: 3px solid #00B900;

            border-radius: 50%;

            width: 30px;

            height: 30px;

            animation: spin 1s linear infinite;

            margin: 0 auto 15px;

        }

        @keyframes spin {

            0% { transform: rotate(0deg); }

            100% { transform: rotate(360deg); }

        }

        .line-logo {

            width: 60px;

            height: 60px;

            background: #00B900;

            border-radius: 50%;

            display: flex;

            align-items: center;

            justify-content: center;

            margin: 0 auto 20px;

            color: white;

            font-size: 24px;

            font-weight: bold;

        }
</style>
</head>
<body>
<div class="container">
<div class="line-logo">LINE</div>
<h2>LINE LIFF Flex Message</h2>
<div id="status" class="status loading">
<div class="spinner"></div>

            ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î LIFF...
</div>
</div>
<script src="https://static.line-scdn.net/liff/edge/versions/2.22.3/liff.js"></script>
<script>

        const statusDiv = document.getElementById('status');

        // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Flex Message

        const flexMessage = {

            type: 'flex',

            altText: 'Flex Message ‡∏à‡∏≤‡∏Å LIFF',

            contents: {

                type: 'bubble',

                header: {

                    type: 'box',

                    layout: 'vertical',

                    contents: [

                        {

                            type: 'text',

                            text: 'üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö!',

                            weight: 'bold',

                            size: 'xl',

                            color: '#ffffff'

                        }

                    ],

                    backgroundColor: '#00B900',

                    paddingAll: '20px'

                },

                body: {

                    type: 'box',

                    layout: 'vertical',

                    contents: [

                        {

                            type: 'text',

                            text: '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ Flex Message ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Ñ‡πå LIFF',

                            wrap: true,

                            size: 'md',

                            margin: 'md'

                        },

                        {

                            type: 'separator',

                            margin: 'lg'

                        },

                        {

                            type: 'box',

                            layout: 'vertical',

                            margin: 'lg',

                            spacing: 'sm',

                            contents: [

                                {

                                    type: 'box',

                                    layout: 'baseline',

                                    spacing: 'sm',

                                    contents: [

                                        {

                                            type: 'text',

                                            text: 'üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:',

                                            color: '#aaaaaa',

                                            size: 'sm',

                                            flex: 2

                                        },

                                        {

                                            type: 'text',

                                            text: new Date().toLocaleDateString('th-TH'),

                                            wrap: true,

                                            color: '#666666',

                                            size: 'sm',

                                            flex: 5

                                        }

                                    ]

                                },

                                {

                                    type: 'box',

                                    layout: 'baseline',

                                    spacing: 'sm',

                                    contents: [

                                        {

                                            type: 'text',

                                            text: '‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤:',

                                            color: '#aaaaaa',

                                            size: 'sm',

                                            flex: 2

                                        },

                                        {

                                            type: 'text',

                                            text: new Date().toLocaleTimeString('th-TH'),

                                            wrap: true,

                                            color: '#666666',

                                            size: 'sm',

                                            flex: 5

                                        }

                                    ]

                                }

                            ]

                        }

                    ]

                },

                footer: {

                    type: 'box',

                    layout: 'vertical',

                    spacing: 'sm',

                    contents: [

                        {

                            type: 'button',

                            style: 'primary',

                            height: 'sm',

                            action: {

                                type: 'uri',

                                label: 'üåê ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏ä‡∏°‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå',

                                uri: 'https://line.me'

                            },

                            color: '#00B900'

                        },

                        {

                            type: 'button',

                            style: 'secondary',

                            height: 'sm',

                            action: {

                                type: 'message',

                                label: 'üí¨ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°',

                                text: '‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏à‡∏≤‡∏Å LIFF!'

                            }

                        }

                    ],

                    flex: 0

                }

            }

        };

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô LIFF

        async function initializeLIFF() {

            try {

                // ‡πÉ‡∏ä‡πâ Demo LIFF ID ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á)

                const liffId = '1657155025-mN3yQKNW';

                statusDiv.innerHTML = '<div class="spinner"></div>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LINE...';

                await liff.init({ liffId: liffId });

                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö

                if (!liff.isLoggedIn()) {

                    statusDiv.className = 'status error';

                    statusDiv.innerHTML = 'üîí ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Ñ‡πå‡∏ú‡πà‡∏≤‡∏ô LINE App';

                    return;

                }

                // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

                const profile = await liff.getProfile();

                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Flex Message ‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

                flexMessage.contents.body.contents[0].text = `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì ${profile.displayName}! ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ Flex Message ‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡∏¥‡∏î‡∏•‡∏¥‡∏á‡∏Ñ‡πå LIFF`;

                statusDiv.innerHTML = '<div class="spinner"></div>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á Flex Message...';

                // ‡∏™‡πà‡∏á Flex Message ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÅ‡∏ä‡∏ó‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

                await liff.sendMessages([flexMessage]);

                statusDiv.className = 'status success';

                statusDiv.innerHTML = `‚úÖ ‡∏™‡πà‡∏á Flex Message ‡πÉ‡∏´‡πâ ${profile.displayName} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!`;

                // ‡∏õ‡∏¥‡∏î LIFF ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

                setTimeout(() => {

                    liff.closeWindow();

                }, 2000);

            } catch (error) {

                console.error('LIFF Error:', error);

                statusDiv.className = 'status error';

                statusDiv.innerHTML = `‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message}`;

            }

        }

        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö

        window.addEventListener('load', initializeLIFF);
</script>
</body>
</html>
 
